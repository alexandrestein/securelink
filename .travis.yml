language: go
go:
  - 1.11.x
  - master
os:
  - linux
  # - osx
env:
  global:
    - GO111MODULE: "on"
    # Provides the coveralls.io token $COVERALLS_TOKEN
    # - secure: MT+0t5A5o8a5dEc7oqNmY3l1SSn86wH8uRvzwAS6j493pJ0sO7o0OUsJfFX7Z4fbBbQp3JCmZEdAW+5umxlcTkTyudxPw3NAnvG0Q/DwfOlfL10gv60+F/hHw9vfHKu/bLpQWe1D9fqeb5gMwUXBVBxRiTDD48Aym6eEeR10y8M7jDTcKLUzOz6DKiL33f/fEWZFWmSamu+X4Wm4UGlW5lt8FoA7dOnYgbg+ABNefjp8rnV3/pnL86hwDxYmK/r/9Ia/XqVKHKkdJKGnEAiQHX03+/Hg8FVzrvElNTAK31KIkUXfGXGAY46AG65EAkgMB5GsBi0JqL4z+DYWNvWnpw/hc1eRZXNzBYuKkkYjieaUj9aKcGSE4tnCn3c8R8In/wEMHM+OrG4XAXMSet9X7eWWloNdnrFgR2YhVLTPJ8ZRXuqPqr/7zFXzyeljXdVvt3nsGHDpKuuB77Txon6n+LHc9KtluvDo9fNFMkpInCyCBDkRmUVeA4xSTiEBhR5d1egbuoVJySXbvBc71MFEOoqmMPLCHoh27Qzi7lTuoudS3CMyXqQ+CO5hPY+9yr2TBWcWhMwBmPHK36FKjVTbcSK+za9/mAyGWmkSrd2yQ/cgtixoD/Lno/rDPk40/v/d02mWtDwaUpdopO7g42y7xGBzD7KtVQ6DlY8HKvKTeW0=
    # Provides the codeclimat token $CC_TEST_REPORTER_ID
    - secure: ZkfyfiV/nGsg3vKs4UZMmbLREVT2TA1PMla5fQShF0uXU3HQ51SkA3mVLF3TfhCyoYpbzvrVIHSk23oLsxrqC1kaAXmOYjk5kkM7pULqlFoi6zmVAFKMqp9EG6hcLx/pEM5wDsqVk7HWKvHHHH3uhprMk18w9Qy6jNwYa9QGJ5Nr9qaMu6fAuLy3IHvM59tFtIHiCut/KHdGpDBybrRprZdd6LyeYfV5MRibVZsLqyVJWunjx7ne36Vx8AuY3OkNfE1VJOeP7urwwRJjg906TZoxxtrMDSsoQG+JCNmUnuQUkTJ09MzSSoaJpqNAiQepDzRpvrH458kMM+fcuX7wg0nuJkgLmrgriD16FNHCCH9piGJwI2H68IyXPXZA2UHQ2lZUtUyiYFIwpO0eMZB0SZN1f5rBdsDQkqSYRKWM61efI3NcdZv1CTsAVIAzu+WQW9iQdQYpDHEJgDdoo4CmkmvTB9k3g2InRUf876Q7+XtjucsiigAlMJm9aGYVf0OLhCuoBzM2zXesy/Q43iNdFQ+hC0aEZrX6+50Ww+RMqKw7yqkESw+rw2O6TQO6ZMhsxUpdsCGmNO8J90lp/ausiDeuiPgOEtKuMj1S5oA0R4B7YH4APUvvS79fkG/NAj+vK5OBdpNwmebnXTMxT+nrCZ0DAne8KCVPWQLDmZiHhEE=
services:
  - securelink
before_script:
  - curl -L https://codeclimate.com/downloads/test-reporter/test-reporter-latest-linux-amd64 > ./cc-test-reporter
  - chmod +x ./cc-test-reporter
  - ./cc-test-reporter before-build
install:
  # - go get golang.org/x/tools/cmd/cover
  # - go get github.com/mattn/goveralls
  - go get -v ./...
script:
  - go test -v -covermode=count -coverprofile=coverage.out ./...
  # - $HOME/gopath/bin/goveralls -coverprofile=coverage.out -service=travis-ci -repotoken $COVERALLS_TOKEN

after_script:
  - ./cc-test-reporter after-build --exit-code coverage.out